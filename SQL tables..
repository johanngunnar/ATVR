/*Grunntöflur litlar breytingar*/

CREATE TABLE Item_Category  (
	name INTEGER PRIMARY KEY,
	tegund VARCHAR(250)
);


/*Grunntöflur breytast mikið */

CREATE TABLE Innstreymi  (
  id INTEGER PRIMARY KEY,
  ItemNo INTEGER,
  Vinnslu_No VARCHAR(250),
  Sending VARCHAR(250),
  /*Description VARCHAR(250),*/
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  /* date */
  Foreign key(ItemNo) References item(id),
  Foreign key(Sending) References Sending(id)
);

CREATE TABLE Sending (
  id VARCHAR(250) PRIMARY KEY,
  Vendor VARCHAR(250)
);


CREATE TABLE Utstreymi  (
  id INTEGER PRIMARY KEY,
  Destination VARCHAR(250),
  ItemNo INTEGER,
  /*Desctription VARCHAR(250),*/
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  MillL_PUnit VARCHAR(250),
  Liter VARCHAR(250),

  Foreign key(ItemNo) References item(id)
);

CREATE TABLE Vinnsla  (
  id INTEGER PRIMARY KEY,
  Document_ID1 VARCHAR(250),
  Document_ID2 VARCHAR(250),
  UserID VARCHAR(250),
  ItemNo INTEGER,
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  Date_Scanned VARCHAR(250),
  Picked VARCHAR(250),
  Picked_Unit VARCHAR(250),

  Foreign key(ItemNo) References item(id)
);

/* Aðrar töflur */

CREATE TABLE item (
  id INTEGER PRIMARY KEY,
  /*Description VARCHAR(250),*/
  UnitPrice VARCHAR(250),
  Soluflokkur VARCHAR(250),
  Tegund INTEGER,
  ABS VARCHAR(250),
  Agengisgjald INTEGER,
  UnitOfMeasure VARCHAR(250),
  MilliL VARCHAR(250),
	Vendor VARCHAR(250),

  Foreign key(Tegund) References  Item_Category(name)
  /*Foreign key(Soluflokkur) References  Soluflokkur(name),*/
  /*Foreign key(vendor) References  vendor(kennitala)*/
);

/* SELECT SKIPANIR */

/* Fjöldi tegunda*/

select i.tegund, c.tegund, count(c.tegund)
from item i, item_category c
where i.tegund = c.name
group by i.tegund,c.tegund
order by count(c.tegund) DESC

select count(Document_ID1)
from vinnsla
group by Document_ID1

select i.Vinnslu_No,v.Document_ID1
from innstreymi i, vinnsla v
where v.Document_ID1 like '%PU%'
order by  i.Vinnslu_No
