/*Grunntöflur litlar breytingar*/

CREATE TABLE Item_Category  (
	name INTEGER PRIMARY KEY,
	tegund VARCHAR(250),
	Timevalue INTEGER
);

CREATE TABLE Sending (
  id VARCHAR(250) PRIMARY KEY,
  Vendor VARCHAR(250)
);

CREATE TABLE item (
  id INTEGER PRIMARY KEY,
  UnitPrice VARCHAR(250),
  Soluflokkur VARCHAR(250),
  Tegund INTEGER,
  ABS VARCHAR(250),
  Agengisgjald INTEGER,
  UnitOfMeasure VARCHAR(250),
  MilliL VARCHAR(250),
	Vendor VARCHAR(250),
	Description VARCHAR(250),
	/*Vendor_name VARCHAR(250),*/

  Foreign key(Tegund) References  Item_Category(name)
  /*Foreign key(Soluflokkur) References  Soluflokkur(name),*/
  /*Foreign key(vendor) References  vendor(kennitala)*/
);

/*Grunntöflur breytast mikið */

CREATE TABLE Innstreymi  (
  id INTEGER PRIMARY KEY,
  ItemNo INTEGER,
  Vinnslu_No VARCHAR(250),
  Sending VARCHAR(250),
  /*Description VARCHAR(250),*/
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  Date VARCHAR(250),
  Put VARCHAR(250),
  /* date */
  Foreign key(ItemNo) References item(id),
  Foreign key(Sending) References Sending(id)
);

CREATE TABLE Utstreymi  (
  id INTEGER PRIMARY KEY,
  Destination VARCHAR(250),
  ItemNo INTEGER,
  /*Desctription VARCHAR(250),*/
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  MillL_PUnit VARCHAR(250),
  Liter VARCHAR(250),

  Foreign key(ItemNo) References item(id)
);

CREATE TABLE Vinnsla  (
  id INTEGER PRIMARY KEY,
  Document_ID1 VARCHAR(250),
  Document_ID2 VARCHAR(250),
  UserID VARCHAR(250),
  ItemNo INTEGER,
  Qty_perUnit INTEGER,
  Quantity INTEGER,
  Total_Qty INTEGER,
  Date_Scanned VARCHAR(250),
  Picked VARCHAR(250),
  Picked_Unit VARCHAR(250),

  Foreign key(ItemNo) References item(id)
);


/* SELECT SKIPANIR */

/* Fjöldi tegunda*/

select i.tegund, c.tegund, count(c.tegund)
from item i, item_category c
where i.tegund = c.name
group by i.tegund,c.tegund
order by count(c.tegund) DESC

select count(Document_ID1)
from vinnsla
group by Document_ID1

select i.Vinnslu_No,v.Document_ID1
from innstreymi i, vinnsla v
where v.Document_ID1 like '%PU%'
order by  i.Vinnslu_No


select *
from Innstreymi i, item v, Item_Category c
where i.itemno = v.id
and v.Tegund = c.name
and v.vendor = '420369-7789'
and i.date = '09/02/2018'

select c.tegund, sum(i.Quantity)
from Innstreymi i, item v, Item_Category c
where i.itemno = v.id
and v.Tegund = c.name
and v.vendor = '420369-7789'
and i.date = '09/02/2018'
Group by c.tegund

select i.sending, i.put, i.date, i.itemno,i.Quantity, c.tegund, vi.Document_ID1, vi.Quantity, vi.picked, vi.Picked_Unit,vi.UserID,v.Description
from Innstreymi i, item v, Item_Category c,vinnsla vi
where i.itemno = v.id
and i.put = vi.Document_ID1
and v.Tegund = c.name
and i.itemno = vi.itemno
and v.vendor = '420369-7789'
and i.date = '09/02/2018'
